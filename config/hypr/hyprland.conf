source = ./colors.conf

###
### ENV
###

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland

env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_QPA_PLATFORMTHEME,kde

exec-once = hyprctl setcursor Breeze_Light 36
# Idle daemon
#exec-once = swayidle -w timeout 300 'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on' timeout 310 'swaylock -f' before-sleep 'swaylock -f'
exec-once = hypridle
# Status bar
exec-once = waybar
# Notification daemon
#exec-once = mako
# Clipboard history
exec-once = wl-paste --type text  --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
# Network
#exec-once = nm-applet
# Bluetooth
#exec-once = blueman-applet
# GUI utility for setting wallpaper. Handles which wallpaper daemon should be launched
exec-once = waypaper --restore

misc {
	force_default_wallpaper = 0
	disable_hyprland_logo = true # :( no amine
	disable_autoreload = true
	initial_workspace_tracking = 0
}

xwayland {
	enabled = true
}

###
### STYLE
###

general {
	gaps_in = 5
	gaps_out = 10

	border_size = 2

	col.active_border = rgba($color_active$alpha_active)
	col.inactive_border = rgba($color_passive$alpha_passive)

	resize_on_border = false 

	allow_tearing = false
}

decoration {
	rounding = 0

	active_opacity = 1.0
	inactive_opacity = 1.0

	shadow {
		enabled = false
	}

	blur {
		enabled = false
	}
}

animations {
	enabled = false

	bezier = eOback, 0.34, 1.56, 0.64, 1
	bezier = eOexpo, 0.16, 1, 0.3, 1

	animation = windows,     1, 7,  eOexpo, popin 70%
	animation = windowsOut,  1, 7,  eOback, popin 80%
	animation = border,      1, 10, eOback
	animation = borderangle, 1, 8,  eOback
	animation = fade,        1, 7,  eOback
	animation = workspaces,  1, 5,  eOback
}

###
### BINDS
###

$mod = SUPER
$shftMod = SUPER SHIFT
$ctrlMod = SUPER CONTROL

$execMod = CTRL ALT

source = ./binds/layout_master.conf

$terminal    = kitty
$cliToTerm   = kitty -e
$fileManager = dolphin
$browser     = librewolf -P RF
$browserRF   = librewolf -P RF
$telegram    = Telegram
$calculator  = speedcrunch
$volumemixer = pavucontrol -t 3

$screenLock    = swaylock -f
$displayToggle = hyprctl output * toggle

$screenshotScreen = grim - | wl-copy
$screenshotRegion = grim -g "$(slurp)" - | wl-copy
$screenshotWindow = grim -g "$(slurp)" - | wl-copy

$pickcolorHEX = hyprpicker -f hex | wl-copy
$pickcolorRGB = hyprpicker -f rgb | wl-copy

$brightnessUp   = brightnessctl --class=backlight set +10%
$brightnessDown = brightnessctl --class=backlight set 10%-

$volumeDown = wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1-
$volumeMute = wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
$volumeUp   = wpctl set-volume @DEFAULT_AUDIO_SINK@ 0.1+
$micMute    = wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

$audioPlay  = playerctl play-pause
$audioPause = playerctl play-pause
$audioStop  = playerctl play-pause
$audioPrev  = playerctl previous
$audioNext  = playerctl next

$menu         = fuzzel
$menuBinaries = fuzzel
# Get, select and send to clipboard preffered item from clipboard history
$menuClipboard = cliphist list | fuzzel --width=90 --prompt /cliphist/ --dmenu | cliphist decode | wl-copy

$barRestart = systemctl --user restart waybar
# Show/hide bar
$barToggle  = pkill -SIGUSR1 waybar

$mountVault = $cliToTerm cryptomount
$closeVault = $cliToTerm cryptoclose

bind = $mod, ESC, submap, passthru
bind = $mod, ESC, submap, reset

# Application launch bindings
bind = $mod, Q, killactive,
bind = ALT, F4,     killactive,

bind = $execMod, T, exec, $terminal
bind = $mod, E,     exec, $fileManager
bind = $execMod, E, exec, $browserRF
bind = $execMod, W, exec, $browser
bind = $execMod, Q, exec, $telegram
bind = $execMod, C, exec, $calculator
bind = $execMod, S, exec, $volumemixer

bind = $execMod, L, exec, $screenLock
bind = $shftmod, P,   exec, $displayToggle

bind = , PRINT,      exec, $screenshotScreen
bind = SHIFT, Print, exec, $screenshotRegion
bind = $shftMod, S,  exec, $screenshotRegion
bind = $mod, PRINT,  exec, $screenshotWindow

bind = $mod, P,     exec, $pickcolorHEX
bind = $ctrlMod, P, exec, $pickcolorRGB

bind = $mod, D,     exec, $menu
bind = ALT, SPACE,  exec, $menu
bind = $shftMod, D, exec, $menuBinaries
bind = $mod, V,     exec, $menuClipboard

bind = $ctrlMod, B, exec, $barRestart
bind = $mod, B,     exec, $barToggle

bind = $execMod, HOME, exec, $mountVault
bind = $execMod, END,  exec, $closeVault

# Keyboard Fn Binds
bind =,XF86MonBrightnessUp,   exec, $brightnessUp
bind =,XF86MonBrightnessDown, exec, $brightnessDown

bind =,XF86AudioLowerVolume, exec, $volumeDown
bind =,XF86AudioMute,        exec, $volumeMute
bind =,XF86AudioRaiseVolume, exec, $volumeUp
bind =,XF86AudioMicMute,     exec, $micMute

bind =,XF86AudioPlay,  exec, $audioPlay
bind =,XF86AudioPause, exec, $audioPause
bind =,XF86AudioStop,  exec, $audioStop
bind =,XF86AudioPrev,  exec, $audioPrev
bind =,XF86AudioNext,  exec, $audioNext

bind =,XF86Start,      exec, $menu
bind =,XF86Search,     exec, $menu
bind =,XF86Calculator, exec, $calculator

bind = $shftMod, F, togglefloating,
bind = $mod, Z,     fullscreen

bind = $mod, mouse_down, workspace, e+0
bind = $mod, mouse_up,   workspace, e-2

# Super + Left mouse
bindm = $mod, mouse:272, movewindow
# Super + Right mouse
bindm = $mod, mouse:273, resizewindow

bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

bind = $mod SHIFT, 1, movetoworkspacesilent, 1
bind = $mod SHIFT, 2, movetoworkspacesilent, 2
bind = $mod SHIFT, 3, movetoworkspacesilent, 3
bind = $mod SHIFT, 4, movetoworkspacesilent, 4
bind = $mod SHIFT, 5, movetoworkspacesilent, 5
bind = $mod SHIFT, 6, movetoworkspacesilent, 6
bind = $mod SHIFT, 7, movetoworkspacesilent, 7
bind = $mod SHIFT, 8, movetoworkspacesilent, 8
bind = $mod SHIFT, 9, movetoworkspacesilent, 9
bind = $mod SHIFT, 0, movetoworkspacesilent, 10

bind = $shftMod, R, exec, hyprctl reload
# This shit keeps work after logging out and session keeps living
bind = $shftMod, Backspace, exec, pkill kwalletd6 && sleep 0.5s && uwsm stop

###
### INPUT
###

input {
	kb_layout = us,ru
	kb_options = grp:win_space_toggle,grp:caps_toggle,grp_led:scroll
	kb_variant = 
	kb_model =
	kb_rules =

	follow_mouse = 1

	accel_profile = flat
	
	sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

	touchpad {
		natural_scroll = true
		disable_while_typing = false
	}
}
gestures {
	workspace_swipe = true
}
device {
	name = syna32b6:00-06cb:ce17-touchpad
	accel_profile = adaptive
}

###
### WINDOW RULES
###

# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

# Example windowrule v1
# windowrule = float, ^(kitty)$

# Example windowrule v2
# windowrulev2 = float,class:^(kitty)$,title:^(kitty)$

windowrulev2 = center,class:*

# Gamescope
windowrulev2 = fullscreen,class:^(gamescope)$

# Calculator
windowrulev2 = float,class:^(org.speedcrunch.)$
windowrulev2 = size 30% 45%,class:^(org.speedcrunch.)$
# Network connection editor
windowrulev2 = float,class:^(nm-connection-editor)$
windowrulev2 = size 50% 65%,class:^(nm-connection-editor)$
# Bluetooth manager
windowrulev2 = float,class:^(.blueman-manager-wrapped)$
windowrulev2 = size 50% 65%,class:^(.blueman-manager-wrapped)$
# Pulseaudio volume control
windowrulev2 = float,class:(pavucontrol)$
windowrulev2 = size 50% 65%,class:(pavucontrol)$
# Open/Save dialog
windowrulev2 = float,class:^(xdg-desktop-portal-gtk)$
windowrulev2 = size 50% 65%,class:^(xdg-desktop-portal-gtk)$

windowrulev2 = float,class:freedesktop.impl.portal
windowrulev2 = size 50% 65%,class:freedesktop.impl.portal



# Open/Save/etc dialogs
windowrulev2 = center,class:^(Gimp-2.10)$,title:([O,o]pen)
windowrulev2 = size 50% 65%,class:^(Gimp-2.10)$,title:([O,o]pen)

windowrulev2 = center,title:([S,s]ave)
windowrulev2 = size 50% 65%,title:([S,s]ave)

windowrulev2 = center,title:([S,s]ave [A,a]s)
windowrulev2 = size 50% 65%,title:([S,s]ave [A,a]s)

windowrulev2 = center,title:([F,f]ile [U,u]pload)
windowrulev2 = size 50% 65%,title:([F,f]ile [U,u]pload)

windowrulev2 = float,class:^(org.telegram.desktop)$,title:([M,m]edia viewer)

windowrulev2 = suppressevent maximize, class:.*

# Screencast wayland windows to xorg clients tweak.
# (it create weird window, that needs to be hidden by this rules.
# Copied from hyprland wiki.
windowrulev2 = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrulev2 = noanim, class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus, class:^(xwaylandvideobridge)$
windowrulev2 = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrulev2 = noblur, class:^(xwaylandvideobridge)$
windowrulev2 = nofocus, class:^(xwaylandvideobridge)$

